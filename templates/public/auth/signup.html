{% extends './_base.html' %}
{% load static %}

{% block title %}
Sign Up
{% endblock %}

{% block content %}
<div class="w-full">
    <div class="p-4 text-white bg-background_primary flex space-x-2 items-center">
        <i class="ti ti-user-plus"></i>
        <h2 class="font-bold text-xs md:text-lg"> Kindly provide the information requested below to enable us create an
            account for
            you.</h2>
    </div>

    <div class="p-3 space-y-4 bg-white">
        <h4 class="text-gray-500 font-semibold text-md">Personal Details</h4>
        <hr>

        <form method="post" id="signupForm">
            <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 gap-5">
                <div class="grid grid-cols-1 md:grid-cols-3 col-span-3 gap-5">
                    <div class="space-y-2">
                        <label for="firstName" class="font-medium text-sm text-gray-800">First Name</label>
                        <input type="text"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="firstName" id="firstName" placeholder="First Name" aria-label="First Name">
                    </div>
                    <div class="space-y-2">
                        <label for="middleName" class="font-medium text-sm text-gray-800">Middle Name</label>
                        <input type="text"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="middleName" id="middleName" placeholder="Middle Name" aria-label="Middle Name">
                    </div>
                    <div class="space-y-2">
                        <label for="lastName" class="font-medium text-sm text-gray-800">Last Name</label>
                        <input type="text"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="lastName" id="lastName" placeholder="Last Name" aria-label="Last Name">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 col-span-3 gap-5">
                    <div class="space-y-2">
                        <label for="country" class="font-medium text-sm text-gray-800">Country</label>
                        <select name="country" id="country"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none">
                            <option value="------">Select Country</option>
                        </select>
                    </div>
                    <div class="space-y-2">
                        <label for="state" class="font-medium text-sm text-gray-800">State</label>
                        <select name="state" id="state"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none">
                            <option value="------">Select State</option>
                        </select></select>
                    </div>
                    <div class="space-y-2">
                        <label for="city" class="font-medium text-sm text-gray-800">City</label>
                        <input type="text"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="city" id="city" placeholder="City" aria-label="City">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 col-span-3 gap-5">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                        <div class="space-y-2">
                            <label for="zipcode" class="font-medium text-sm text-gray-800">Zip Code</label>
                            <input type="text"
                                class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                                name="zipcode" id="zipcode" placeholder="Zip Code" aria-label="Zip Code">
                        </div>
                        <div class="space-y-2">
                            <label for="dateOfBirth" class="font-medium text-sm text-gray-800">Date Of Birth</label>
                            <input type="date"
                                class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                                name="dateOfBirth" id="dateOfBirth" placeholder="Date Of Birth"
                                aria-label="Date Of Birth">
                        </div>
                    </div>

                    <div class="space-y-2 col-span-2">
                        <label for="address" class="font-medium text-sm text-gray-800">House Address</label>
                        <input type="text"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="address" id="address" placeholder="House Address" aria-label="House Address">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-2 col-span-3">
                    <div class="space-y-2">
                        <label for="phone" class="font-medium text-sm text-gray-800">Phone Number</label>
                        <input type="text"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="phone" id="phone" placeholder="Phone Number" aria-label="Phone Number">
                    </div>
                    <div class="space-y-2">
                        <label for="email" class="font-medium text-sm text-gray-800">Email Address</label>
                        <input type="email"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="email" id="email" placeholder="Email Address" aria-label="Email Address">
                    </div>
                </div>
                <div class="col-span-3 space-y-3">
                    <hr>
                    <h4 class="text-gray-500 font-semibold text-md">Personal Details</h4>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-2 col-span-3">
                    <div class="space-y-2">
                        <label for="occupation" class="font-medium text-sm text-gray-800">Occupation</label>
                        <select name="occupation" id="occupation"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none">
                            <option value="------">Select Type of Employment</option>
                        </select>
                    </div>
                    <div class="space-y-2">
                        <label for="income" class="font-medium text-sm text-gray-800">Annual Income range</label>
                        <select name="income" id="income"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none">
                            <option value="------">Select salary range</option>
                        </select></select>
                    </div>
                </div>

                <div class="col-span-3 space-y-3">
                    <hr>
                    <h4 class="text-gray-500 font-semibold text-md">Banking Details</h4>
                    <hr>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 col-span-3 gap-5">
                    <div class="space-y-2">
                        <label for="ssn" class="font-medium text-sm text-gray-800">SSN/TIN(Or equivalence)</label>
                        <input type="text"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="ssn" id="ssn" placeholder="SSN/TIN(Or equivalence)"
                            aria-label="SSN/TIN(Or equivalence)">
                    </div>

                    <div class="space-y-2">
                        <label for="accountType" class="font-medium text-sm text-gray-800">Account Type</label>
                        <select name="accountType" id="accountType"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none">
                            <option value="------">Select account type</option>
                        </select></select>
                    </div>

                    <div class="space-y-2">
                        <label for="currency" class="font-medium text-sm text-gray-800">Account Currency</label>
                        <select name="currency" id="currency"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none">
                            <option value="------">American (United States) Dollars - USD</option>
                        </select></select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 col-span-3 gap-5">
                    <div class="space-y-2">
                        <label for="pin" class="font-medium text-sm text-gray-800">2FA PIN</label>
                        <input type="text"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="pin" id="pin" placeholder="2FA PIN" aria-label="2FA PIN">
                    </div>

                    <div class="space-y-2">
                        <label for="password1" class="font-medium text-sm text-gray-800">Password</label>
                        <input type="password"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="password1" id="password1" placeholder="Password" aria-label="Password">
                    </div>

                    <div class="space-y-2">
                        <label for="password2" class="font-medium text-sm text-gray-800">Confirm Password</label>
                        <input type="password"
                            class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none"
                            name="password2" id="password2" placeholder="Confirm Password"
                            aria-label="Confirm Password">
                    </div>
                </div>

                <div class="space-y-2">
                    <label for="passport" class="font-medium text-sm text-gray-800">Passport Photograph</label>
                    <input type="file" name="passport" id="passport"
                        class="w-full px-3 py-2 text-sm rounded-sm border border-gray-300 bg-none outline-none">
                </div>

                <div class="col-span-3 flex items-center space-x-3">
                    <button type="submit"
                        class="px-10 py-3 rounded-md bg-background_primary text-white font-semibold text-sm">Create
                        Account</button>

                    <button type="reset"
                        class="px-10 py-3 rounded-md border border-background_primary hover:bg-background_primary duration-300 text-background_primary hover:text-white font-semibold text-sm">Reset</button>
                </div>
            </div>
        </form>

        <!-- Registration Prompt -->
        <div class="text-center text-sm text-gray-500">
            Have an account?
            <a href="{% url 'auth:login' %}" class="font-medium text-blue-500 hover:text-blue-700">
                Login now
            </a>
        </div>

        <!-- Security Disclaimer -->
        <div class="mt-8 text-center text-xs text-gray-400">
            <svg class="inline-block h-4 w-4 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                </path>
            </svg>
            <p class="mt-1">
                We use bank-grade security measures to protect your information.
            </p>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $("#error-message, #success-message").hide();

        $("#signupForm").submit(function (e) {
            e.preventDefault();
            let formData = new FormData(this);

            $.ajax({
                type: "POST",
                url: "{% url 'auth:signup' %}",
                data: formData,
                processData: false,
                contentType: false,
                success: function (response) {
                    if (response.success) {
                        window.location.href = "{% url 'auth:login' %}";
                    } else {
                        // Handle validation errors
                        alert(response.errors);
                    }
                },
                error: function (xhr) {
                    alert("An error occurred. Please try again.");
                }
            });
        });
    });
</script>
{% endblock %}